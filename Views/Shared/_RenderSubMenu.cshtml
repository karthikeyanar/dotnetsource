@model dotnetsource.Helpers.RenderSubMenu
@{
    int viewBagTopMenuID = (int)ViewBag.TopMenu;
    int viewBagSubMenuID = (int)ViewBag.Submenu;
}
@if (Model.SubMenus.Count() > 0)
{
    <ul class="nav sub-menu collapse @((viewBagTopMenuID == Model.MenuID) ? "in" : "")">
        @foreach (dotnetsource.Helpers.Menu submenu in Model.SubMenus)
        {
            <li class="@(viewBagSubMenuID == submenu.MenuID ? "active" : "")">
                <a href="@(string.IsNullOrEmpty(submenu.MenuURL) ? "javascript:;" : submenu.MenuURL)">@submenu.MenuName</a>
                @{
                    var subMenus = dotnetsource.Helpers.Common.Menus.Where(q => q.TopMenuID == submenu.MenuID).ToList();
                    }
                @Html.Partial("_RenderSubMenu", new dotnetsource.Helpers.RenderSubMenu { MenuID = submenu.MenuID, SubMenus = subMenus })
            </li>
        }
    </ul>
}
