(function(g,y){function Wa(a){g.extend(!0,ma,a)}function rb(a,c,b){function d(){setTimeout(function(){!w.start&&0!==g("body")[0].offsetWidth&&q()},0)}function e(a){if(!w||a!=w.name){E++;v();var b=w,c;b?((b.beforeHide||Xa)(),ga(H,H.height()),b.element.hide()):ga(H,1);H.css("overflow","hidden");(w=Q[a])?w.element.show():w=Q[a]=new Y[a](c=aa=g("<div class='fc-view fc-view-"+a+"' style='position:absolute'/>").appendTo(H),u);b&&B.deactivateButton(b.name);B.activateButton(a);q();H.css("overflow","");b&&
ga(H,1);c||(w.afterShow||Xa)();E--}}function q(b){if(0!==m.offsetWidth){E++;v();ha===y&&h();var C=!1;!w.start||b||A<w.start||A>=w.end?(w.render(A,b||0),r(!0),C=!0):w.sizeDirty?(w.clearEvents(),r(),C=!0):w.eventsDirty&&(w.clearEvents(),C=!0);w.sizeDirty=!1;w.eventsDirty=!1;b=C;!c.lazyFetching||L(w.visStart,w.visEnd)?k():b&&s();R=a.outerWidth();B.updateTitle(w.title);b=new Date;b>=w.start&&b<w.end?B.disableButton("today"):B.enableButton("today");E--;w.trigger("viewDisplay",m)}}function p(){f();0!==
m.offsetWidth&&(h(),r(),v(),w.clearEvents(),w.renderEvents(S),w.sizeDirty=!1)}function f(){g.each(Q,function(a,b){b.sizeDirty=!0})}function h(){ha=c.contentHeight?c.contentHeight:c.height?c.height-(C?C.height():0)-ya(H):Math.round(H.width()/Math.max(c.aspectRatio,0.5))}function r(a){E++;w.setHeight(ha,a);aa&&(aa.css("position","relative"),aa=null);w.setWidth(H.width(),a);E--}function l(){if(!E)if(w.start){var b=++V;setTimeout(function(){b!=V||E||0===m.offsetWidth||R==(R=a.outerWidth())||(E++,p(),
w.trigger("windowResize",m),E--)},200)}else d()}function k(){n(w.visStart,w.visEnd)}function s(a){Z();0!==m.offsetWidth&&(w.clearEvents(),w.renderEvents(S,a),w.eventsDirty=!1)}function Z(){g.each(Q,function(a,b){b.eventsDirty=!0})}function v(){w&&w.unselect()}var u=this;u.options=c;u.render=function(b){H?(h(),f(),Z(),q(b)):(a.addClass("fc"),c.isRTL?a.addClass("fc-rtl"):a.addClass("fc-ltr"),c.theme&&a.addClass("ui-widget"),H=g("<div class='fc-content' style='position:relative'/>").prependTo(a),B=new sb(u,
c),(C=B.render())&&a.prepend(C),e(c.defaultView),g(window).resize(l),0!==g("body")[0].offsetWidth||d())};u.destroy=function(){g(window).unbind("resize",l);B.destroy();H.remove();a.removeClass("fc fc-rtl ui-widget")};u.refetchEvents=k;u.reportEvents=function(a){S=a;s()};u.reportEventChange=function(a){s(a)};u.rerenderEvents=s;u.changeView=e;u.select=function(a,b,c){w.select(a,b,c===y?!0:c)};u.unselect=v;u.prev=function(){q(-1)};u.next=function(){q(1)};u.prevYear=function(){Fa(A,-1);q()};u.nextYear=
function(){Fa(A,1);q()};u.today=function(){A=new Date;q()};u.gotoDate=function(a,b,c){a instanceof Date?A=t(a):Ya(A,a,b,c);q()};u.incrementDate=function(a,b,c){a!==y&&Fa(A,a);b!==y&&Ga(A,b);c!==y&&x(A,c);q()};u.formatDate=function(a,b){return ia(a,b,c)};u.formatDates=function(a,b,C){return Ha(a,b,C,c)};u.getDate=function(){return t(A)};u.getView=function(){return w};u.option=function(a,b){if(b===y)return c[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)c[a]=b,p()};u.trigger=function(a,b){if(c[a])return c[a].apply(b||
m,Array.prototype.slice.call(arguments,2))};tb.call(u,c,b);var L=u.isFetchNeeded,n=u.fetchEvents,m=a[0],B,C,H,w,Q={},R,ha,aa,V=0,E=0,A=new Date,S=[],G;Ya(A,c.year,c.month,c.date);c.droppable&&g(document).bind("dragstart",function(a,b){var C=a.target,d=g(C);if(!d.parents(".fc").length){var e=c.dropAccept;if(g.isFunction(e)?e.call(C,d):d.is(e))G=C,w.dragStart(G,a,b)}}).bind("dragstop",function(a,b){G&&(w.dragStop(G,a,b),G=null)})}function sb(a,c){function b(b){var d=g("<td class='fc-header-"+b+"'/>");
(b=c.header[b])&&g.each(b.split(" "),function(b){0<b&&d.append("<span class='fc-header-space'/>");var h;g.each(this.split(","),function(b,f){if("title"==f)d.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),h&&h.addClass(e+"-corner-right"),h=null;else{var q;a[f]?q=a[f]:Y[f]&&(q=function(){v.removeClass(e+"-state-hover");a.changeView(f)});if(q){var t=c.theme?Ia(c.buttonIcons,f):null,x=Ia(c.buttonText,f),v=g("<span class='fc-button fc-button-"+f+" "+e+"-state-default'>"+(t?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+
t+"'/></span>":x)+"</span>").click(function(){v.hasClass(e+"-state-disabled")||q()}).mousedown(function(){v.not("."+e+"-state-active").not("."+e+"-state-disabled").addClass(e+"-state-down")}).mouseup(function(){v.removeClass(e+"-state-down")}).hover(function(){v.not("."+e+"-state-active").not("."+e+"-state-disabled").addClass(e+"-state-hover")},function(){v.removeClass(e+"-state-hover").removeClass(e+"-state-down")}).appendTo(d);Aa(v);h||v.addClass(e+"-corner-left");h=v}}});h&&h.addClass(e+"-corner-right")});
return d}this.render=function(){e=c.theme?"ui":"fc";if(c.header)return d=g("<table class='fc-header' style='width:100%'/>").append(g("<tr/>").append(b("left")).append(b("center")).append(b("right")))};this.destroy=function(){d.remove()};this.updateTitle=function(a){d.find("h2").html(a)};this.activateButton=function(a){d.find("span.fc-button-"+a).addClass(e+"-state-active")};this.deactivateButton=function(a){d.find("span.fc-button-"+a).removeClass(e+"-state-active")};this.disableButton=function(a){d.find("span.fc-button-"+
a).addClass(e+"-state-disabled")};this.enableButton=function(a){d.find("span.fc-button-"+a).removeClass(e+"-state-disabled")};var d=g([]),e}function tb(a,c){function b(b,c){d(b,function(d){if(c==u){if(d){a.eventDataTransform&&(d=g.map(d,a.eventDataTransform));b.eventDataTransform&&(d=g.map(d,b.eventDataTransform));for(var e=0;e<d.length;e++)d[e].source=b,q(d[e]);m=m.concat(d)}L--;L||l(m)}})}function d(b,c){var e,f=M.sourceFetchers,m;for(e=0;e<f.length;e++){m=f[e](b,x,v,c);if(!0===m)return;if("object"==
typeof m){d(m,c);return}}if(e=b.events)g.isFunction(e)?(n++||h("loading",null,!0),e(t(x),t(v),function(a){c(a);--n||h("loading",null,!1)})):g.isArray(e)?c(e):c();else if(b.url){var p=b.success,q=b.error,r=b.complete;e=g.extend({},b.data||{});f=na(b.startParam,a.startParam);m=na(b.endParam,a.endParam);f&&(e[f]=Math.round(+x/1E3));m&&(e[m]=Math.round(+v/1E3));n++||h("loading",null,!0);g.ajax(g.extend({},ub,b,{data:e,success:function(a){a=a||[];var b=qa(p,this,arguments);g.isArray(b)&&(a=b);c(a)},error:function(){qa(q,
this,arguments);c()},complete:function(){qa(r,this,arguments);--n||h("loading",null,!1)}}))}else c()}function e(a){g.isFunction(a)||g.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a){var b=a;b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[];for(var c=M.sourceNormalizers,e=0;e<c.length;e++)c[e](b);s.push(a);return a}}function q(b){var c=b.source||{},e=na(c.ignoreTimezone,a.ignoreTimezone);b._id=b._id||(b.id===y?"_fc"+vb++:
b.id+"");b.date&&(b.start||(b.start=b.date),delete b.date);b._start=t(b.start=Ja(b.start,e));b.end=Ja(b.end,e);b.end&&b.end<=b.start&&(b.end=null);b._end=b.end?t(b.end):null;b.allDay===y&&(b.allDay=na(c.allDayDefault,a.allDayDefault));b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[]}function p(a,b){return a&&b&&f(a)==f(b)}function f(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!x||a<x||b>v};this.fetchEvents=
function(a,c){x=a;v=c;m=[];var e=++u,d=s.length;L=d;for(var f=0;f<d;f++)b(s[f],e)};this.addEventSource=function(a){if(a=e(a))L++,b(a,u)};this.removeEventSource=function(a){s=g.grep(s,function(b){return!p(b,a)});m=g.grep(m,function(b){return!p(b.source,a)});l(m)};this.updateEvent=function(a){var b,c=m.length,e,d=r().defaultEventEnd,f=a.start-a._start,h=a.end?a.end-(a._end||d(a)):0;for(b=0;b<c;b++)e=m[b],e._id==a._id&&e!=a&&(e.start=new Date(+e.start+f),e.end=a.end?e.end?new Date(+e.end+h):new Date(+d(e)+
h):null,e.title=a.title,e.url=a.url,e.allDay=a.allDay,e.className=a.className,e.editable=a.editable,e.color=a.color,e.backgroudColor=a.backgroudColor,e.borderColor=a.borderColor,e.textColor=a.textColor,q(e));q(a);l(m)};this.renderEvent=function(a,b){q(a);a.source||(b&&(k.events.push(a),a.source=k),m.push(a));l(m)};this.removeEvents=function(a){if(a){if(!g.isFunction(a)){var b=a+"";a=function(a){return a._id==b}}m=g.grep(m,a,!0);for(c=0;c<s.length;c++)g.isArray(s[c].events)&&(s[c].events=g.grep(s[c].events,
a,!0))}else{m=[];for(var c=0;c<s.length;c++)g.isArray(s[c].events)&&(s[c].events=[])}l(m)};this.clientEvents=function(a){return g.isFunction(a)?g.grep(m,a):a?(a+="",g.grep(m,function(b){return b._id==a})):m};this.normalizeEvent=q;for(var h=this.trigger,r=this.getView,l=this.reportEvents,k={events:[]},s=[k],x,v,u=0,L=0,n=0,m=[],B=0;B<c.length;B++)e(c[B])}function Fa(a,c,b){a.setFullYear(a.getFullYear()+c);b||ra(a);return a}function Ga(a,c,b){if(+a){c=a.getMonth()+c;var d=t(a);d.setDate(1);d.setMonth(c);
a.setMonth(c);for(b||ra(a);a.getMonth()!=d.getMonth();)a.setDate(a.getDate()+(a<d?1:-1))}return a}function x(a,c,b){if(+a){c=a.getDate()+c;var d=t(a);d.setHours(9);d.setDate(c);a.setDate(c);b||ra(a);Ka(a,d)}return a}function Ka(a,c){if(+a)for(;a.getDate()!=c.getDate();)a.setTime(+a+(a<c?1:-1)*wb)}function I(a,c){a.setMinutes(a.getMinutes()+c);return a}function ra(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function t(a,c){return c?ra(new Date(+a)):new Date(+a)}function Za(){var a=
0,c;do c=new Date(1970,a++,1);while(c.getHours());return c}function U(a,c,b){for(c=c||1;!a.getDay()||b&&1==a.getDay()||!b&&6==a.getDay();)x(a,c);return a}function $(a,c){return Math.round((t(a,!0)-t(c,!0))/$a)}function Ya(a,c,b,d){c!==y&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c));b!==y&&b!=a.getMonth()&&(a.setDate(1),a.setMonth(b));d!==y&&a.setDate(d)}function Ja(a,c){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*
parseFloat(a));c===y&&(c=!0);return La(a,c)||(a?new Date(a):null)}return null}function La(a,c){var b=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!b)return null;var d=new Date(b[1],0,1);if(c||!b[13]){var e=new Date(b[1],0,1,9,0);b[3]&&(d.setMonth(b[3]-1),e.setMonth(b[3]-1));b[5]&&(d.setDate(b[5]),e.setDate(b[5]));Ka(d,e);b[7]&&d.setHours(b[7]);b[8]&&d.setMinutes(b[8]);b[10]&&d.setSeconds(b[10]);
b[12]&&d.setMilliseconds(1E3*Number("0."+b[12]));Ka(d,e)}else d.setUTCFullYear(b[1],b[3]?b[3]-1:0,b[5]||1),d.setUTCHours(b[7]||0,b[8]||0,b[10]||0,b[12]?1E3*Number("0."+b[12]):0),b[14]&&(e=60*Number(b[16])+(b[18]?Number(b[18]):0),e*="-"==b[15]?1:-1,d=new Date(+d+6E4*e));return d}function Ma(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var c=parseInt(a[1],10);a[3]&&(c%=12,"p"==a[3].toLowerCase().charAt(0)&&
(c+=12));return 60*c+(a[2]?parseInt(a[2],10):0)}}function ia(a,c,b){return Ha(a,null,c,b)}function Ha(a,c,b,d){d=d||ma;var e=a,q=c,p,f=b.length,h,g,l,k="";for(p=0;p<f;p++)if(h=b.charAt(p),"'"==h)for(g=p+1;g<f;g++){if("'"==b.charAt(g)){e&&(k=g==p+1?k+"'":k+b.substring(p+1,g),p=g);break}}else if("("==h)for(g=p+1;g<f;g++){if(")"==b.charAt(g)){p=ia(e,b.substring(p+1,g),d);parseInt(p.replace(/\D/,""),10)&&(k+=p);p=g;break}}else if("["==h)for(g=p+1;g<f;g++){if("]"==b.charAt(g)){h=b.substring(p+1,g);p=ia(e,
h,d);p!=ia(q,h,d)&&(k+=p);p=g;break}}else if("{"==h)e=c,q=a;else if("}"==h)e=a,q=c;else{for(g=f;g>p;g--)if(l=ab[b.substring(p,g)]){e&&(k+=l(e,d));p=g-1;break}g==p&&e&&(k+=h)}return k}function ja(a){if(a.end){var c=a.end;a=a.allDay;c=t(c);return a||c.getHours()||c.getMinutes()?x(c,1):ra(c)}return x(t(a.start),1)}function xb(a,c){return 100*(c.msLength-a.msLength)+(a.event.start-c.event.start)}function Na(a,c,b,d){var e=[],g,p=a.length,f,h,r,l,k;for(g=0;g<p;g++)f=a[g],h=f.start,r=c[g],r>b&&h<d&&(h<
b?(h=t(b),l=!1):l=!0,r>d?(r=t(d),k=!1):k=!0,e.push({event:f,start:h,end:r,isStart:l,isEnd:k,msLength:r-h}));return e.sort(xb)}function Oa(a){var c=[],b,d=a.length,e,g,p,f;for(b=0;b<d;b++){e=a[b];for(g=0;;){p=!1;if(c[g])for(f=0;f<c[g].length;f++){var h=c[g][f];if(h.end>e.start&&h.start<e.end){p=!0;break}}if(p)g++;else break}c[g]?c[g].push(e):c[g]=[e]}return c}function bb(a,c,b){a.unbind("mouseover").mouseover(function(a){for(var e=a.target,q;e!=this;)q=e,e=e.parentNode;(e=q._fci)!==y&&(q._fci=y,q=
c[e],b(q.event,q.element,q),g(a.target).trigger(a));a.stopPropagation()})}function za(a,c,b){for(var d=0,e;d<a.length;d++)e=g(a[d]),e.width(Math.max(0,c-Pa(e,b)))}function cb(a,c,b){for(var d=0,e;d<a.length;d++)e=g(a[d]),e.height(Math.max(0,c-ya(e,b)))}function Pa(a,c){var b=(parseFloat(g.css(a[0],"paddingLeft",!0))||0)+(parseFloat(g.css(a[0],"paddingRight",!0))||0),d;d=(parseFloat(g.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(g.css(a[0],"borderRightWidth",!0))||0);b+=d;d=c?(parseFloat(g.css(a[0],
"marginLeft",!0))||0)+(parseFloat(g.css(a[0],"marginRight",!0))||0):0;return b+d}function ya(a,c){var b;b=(parseFloat(g.css(a[0],"paddingTop",!0))||0)+(parseFloat(g.css(a[0],"paddingBottom",!0))||0);var d;d=(parseFloat(g.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(g.css(a[0],"borderBottomWidth",!0))||0);return b+d+(c?db(a):0)}function db(a){return(parseFloat(g.css(a[0],"marginTop",!0))||0)+(parseFloat(g.css(a[0],"marginBottom",!0))||0)}function ga(a,c){c="number"==typeof c?c+"px":c;a.each(function(a,
d){d.style.cssText+=";min-height:"+c+";_height:"+c})}function Xa(){}function eb(a,c){return a-c}function da(a){return(10>a?"0":"")+a}function Ia(a,c){if(a[c]!==y)return a[c];for(var b=c.split(/(?=[A-Z])/),d=b.length-1,e;0<=d;d--)if(e=a[b[d].toLowerCase()],e!==y)return e;return a[""]}function W(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function fb(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,
"")}function Aa(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Ba(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function yb(a,c){a.each(function(a,d){d.className=d.className.replace(/^fc-\w*/,"fc-"+Qa[c.getDay()])})}function gb(a,c){var b=a.source||{},d=a.color,e=b.color,g=c("eventColor"),p=a.backgroundColor||d||b.backgroundColor||e||c("eventBackgroundColor")||
g,d=a.borderColor||d||b.borderColor||e||c("eventBorderColor")||g,b=a.textColor||b.textColor||c("eventTextColor"),e=[];p&&e.push("background-color:"+p);d&&e.push("border-color:"+d);b&&e.push("color:"+b);return e.join(";")}function qa(a,c,b){g.isFunction(a)&&(a=[a]);if(a){var d,e;for(d=0;d<a.length;d++)e=a[d].apply(c,b)||e;return e}}function na(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==y)return arguments[a]}function Ra(a,c,b){function d(b){var c="",d,f;f=ta+"-widget-header";var h=ta+"-widget-content",
p=k.start.getMonth(),q=ra(new Date),l,t,c=c+"<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";ea&&(c+="<th class='fc-week-number "+f+"'/>");for(d=0;d<F;d++)l=r(0,d),c+="<th class='fc-day-header fc-"+Qa[l.getDay()]+" "+f+"'/>";c+="</tr></thead><tbody>";for(d=0;d<P;d++){c+="<tr class='fc-week'>";ea&&(c+="<td class='fc-week-number "+h+"'><div/></td>");for(f=0;f<F;f++)l=r(d,f),t=["fc-day","fc-"+Qa[l.getDay()],h],l.getMonth()!=p&&t.push("fc-other-month"),+l==+q&&(t.push("fc-today"),
t.push(ta+"-state-highlight")),c+="<td class='"+t.join(" ")+"' data-date='"+m(l,"yyyy-MM-dd")+"'><div>",b&&(c+="<div class='fc-day-number'>"+l.getDate()+"</div>"),c+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";c+="</tr>"}c+="</tbody></table>";ga(a,a.height());B&&B.remove();B=g(c).appendTo(a);C=B.find("thead");H=C.find(".fc-day-header");w=B.find("tbody");Q=w.find("tr");R=w.find(".fc-day");ha=Q.find("td:first-child");aa=Q.eq(0).find(".fc-day-content > div");
Ba(C.add(C.find("tr")));Ba(Q);Q.eq(0).addClass("fc-first");Q.filter(":last").addClass("fc-last");ea&&C.find(".fc-week-number").text(ka);H.each(function(a,b){var c=r(Math.floor(a/F),a%F);g(b).text(m(c,fa))});ea&&w.find(".fc-week-number > div").each(function(a,b){var c=r(a,0);g(b).text(m(c,la))});R.each(function(a,b){var c=r(Math.floor(a/F),a%F);y("dayRender",k,c,g(b))});R.click(e).mousedown(n)}function e(a){if(!s("selectable")){var b=La(g(this).data("date"));y("dayClick",this,b,!0,a)}}function q(a,
b,c){c&&O.build();c=t(k.visStart);for(var d=x(t(c),F),g=0;g<P;g++){var f=new Date(Math.max(c,a)),h=new Date(Math.min(d,b));if(f<h){var m;N?(m=$(h,c)*z+D+1,f=$(f,c)*z+D+1):(m=$(f,c),f=$(h,c));p(g,m,g,f-1).click(e).mousedown(n)}x(c,7);x(d,7)}}function p(b,c,e,d){b=O.rect(b,c,e,d,a);return u(b,a)}function f(a){return{row:Math.floor($(a,k.visStart)/7),col:l(a.getDay())}}function h(a){return r(a.row,a.col)}function r(a,b){return x(t(k.visStart),7*a+b*z+D)}function l(a){return(a-Math.max(X,J)+F)%F*z+D}
var k=this;k.renderBasic=function(b,c,e){P=b;F=c;(N=s("isRTL"))?(z=-1,D=F-1):(z=1,D=0);X=s("firstDay");J=s("weekends")?0:1;ta=s("theme")?"ui":"fc";fa=s("columnFormat");ea=s("weekNumbers");ka=s("weekNumberTitle");la="iso"!=s("weekNumberCalculation")?"w":"W";w?v():V=g("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a);d(e)};k.setHeight=function(b){A=b;b=A-C.height();var c,e,d;"variable"==s("weekMode")?c=e=Math.floor(b/(1==P?2:6)):(c=Math.floor(b/P),e=b-c*(P-1));ha.each(function(a,
b){a<P&&(d=g(b),ga(d.find("> div"),(a==P-1?e:c)-ya(d)))});ga(a,1)};k.setWidth=function(a){E=a;K.clear();G=0;ea&&(G=C.find("th.fc-week-number").outerWidth());S=Math.floor((E-G)/F);za(H.slice(0,-1),S)};k.renderDayOverlay=q;k.defaultSelectionEnd=function(a,b){return t(a)};k.renderSelection=function(a,b,c){q(a,x(t(b),1),!0)};k.clearSelection=function(){L()};k.reportDayClick=function(a,b,c){var e=f(a);y("dayClick",R[e.row*F+e.col],a,b,c)};k.dragStart=function(a,b,c){T.start(function(a){L();a&&p(a.row,
a.col,a.row,a.col)},b)};k.dragStop=function(a,b,c){var e=T.stop();L();e&&(e=h(e),y("drop",a,e,!0,b,c))};k.defaultEventEnd=function(a){return t(a.start)};k.getHoverListener=function(){return T};k.colContentLeft=function(a){return K.left(a)};k.colContentRight=function(a){return K.right(a)};k.dayOfWeekCol=l;k.dateCell=f;k.cellDate=h;k.cellIsAllDay=function(){return!0};k.allDayRow=function(a){return Q.eq(a)};k.allDayBounds=function(a){a=0;ea&&(a+=G);return{left:a,right:E}};k.getRowCnt=function(){return P};
k.getColCnt=function(){return F};k.getColWidth=function(){return S};k.getDaySegmentContainer=function(){return V};jb.call(k,a,c,b);kb.call(k);lb.call(k);zb.call(k);var s=k.opt,y=k.trigger,v=k.clearEvents,u=k.renderOverlay,L=k.clearOverlays,n=k.daySelectionMousedown,m=c.formatDate,B,C,H,w,Q,R,ha,aa,V,E,A,S,G,P,F,O,T,K,N,z,D,X,J,ta,fa,ea,ka,la;Aa(a.addClass("fc-grid"));O=new mb(function(a,b){var c,e,d;H.each(function(a,f){c=g(f);e=c.offset().left;a&&(d[1]=e);d=[e];b[a]=d});d[1]=e+c.outerWidth();Q.each(function(b,
f){b<P&&(c=g(f),e=c.offset().top,b&&(d[1]=e),d=[e],a[b]=d)});d[1]=e+c.outerHeight()});T=new nb(O);K=new ob(function(a){return aa.eq(a)})}function zb(){function a(a){var c=n(),e=m(),d=t(b.visStart),e=x(t(d),e),f=g.map(a,ja),h,p,k,q,l,r,B=[];for(h=0;h<c;h++){p=Oa(Na(a,f,d,e));for(k=0;k<p.length;k++)for(q=p[k],l=0;l<q.length;l++)r=q[l],r.row=h,r.level=k,B.push(r);x(d,7);x(e,7)}return B}function c(a,b){var c=v(),f;b.draggable({zIndex:9,delay:50,opacity:d("dragOpacity"),revertDuration:d("dragRevertDuration"),
start:function(g,h){e("eventDragStart",b,a,g,h);k(a,b);c.start(function(c,e,g,h){b.draggable("option","revert",!c||!g&&!h);L();c?(f=7*g+h*(d("isRTL")?-1:1),u(x(t(a.start),f),x(ja(a),f))):f=0},g,"drag")},stop:function(d,g){c.stop();L();e("eventDragStop",b,a,d,g);f?s(this,a,f,0,a.allDay,d,g):(b.css("filter",""),l(a,b))}})}var b=this;b.renderEvents=function(b,c){f(b);B(a(b),c);e("eventAfterAllRender")};b.compileDaySegs=a;b.clearEvents=function(){h();y().empty()};b.bindDaySeg=function(a,b,e){q(a)&&c(a,
b);e.isEnd&&p(a)&&C(a,b,e);r(a,b)};pb.call(b);var d=b.opt,e=b.trigger,q=b.isEventDraggable,p=b.isEventResizable,f=b.reportEvents,h=b.reportEventClear,r=b.eventElementHandlers,l=b.showEvents,k=b.hideEvents,s=b.eventDrop,y=b.getDaySegmentContainer,v=b.getHoverListener,u=b.renderDayOverlay,L=b.clearOverlays,n=b.getRowCnt,m=b.getColCnt,B=b.renderDaySegs,C=b.resizableDayEvent}function qb(a,c,b){function d(){function a(){X.scrollTop(e)}var b=Za(),c=t(b);c.setHours(m("firstHour"));var e=s(b,c)+1;a();setTimeout(a,
0)}function e(a){if(!m("selectable")){var b=Math.min(ba-1,Math.floor((a.pageX-E.offset().left-sa)/Ca)),c=r(b),e=this.parentNode.className.match(/fc-slot(\d+)/);e?(e=parseInt(e[1])*m("slotMinutes"),c.setHours(Math.floor(e/60)),c.setMinutes(e%60+ua),B("dayClick",P[b],c,!1,a)):B("dayClick",P[b],c,!0,a)}}function q(a,b,c){c&&va.build();var d=t(n.visStart);da?(c=$(b,d)*oa+pa+1,a=$(a,d)*oa+pa+1):(c=$(a,d),a=$(b,d));c=Math.max(0,c);a=Math.min(ba,a);c<a&&p(0,c,0,a-1).click(e).mousedown(ha)}function p(a,b,
c,e){a=va.rect(a,b,c,e,K);return H(a,K)}function f(a,b){for(var c=t(n.visStart),d=x(t(c),1),f=0;f<ba;f++){var g=new Date(Math.max(c,a)),h=new Date(Math.min(d,b));if(g<h){var m=f*oa+pa,m=va.rect(0,m,0,m,J),g=s(c,g),h=s(c,h);m.top=g;m.height=h-g;H(m,J).click(e).mousedown(u)}x(c,1);x(d,1)}}function h(a){var b=r(a.col);a=a.row;m("allDaySlot")&&a--;0<=a&&I(b,ua+a*wa);return b}function r(a){return x(t(n.visStart),a*oa+pa)}function l(a){return m("allDaySlot")&&!a.row}function k(a){return(a-Math.max(ga,ia)+
ba)%ba*oa+pa}function s(a,b){a=t(a,!0);if(b<I(t(a),ua))return 0;if(b>=I(t(a),W))return fa.height();var c=m("slotMinutes"),e=60*b.getHours()+b.getMinutes()-ua,d=Math.floor(e/c),f=M[d];f===y&&(f=M[d]=fa.find("tr:eq("+d+") td div")[0].offsetTop);return Math.max(0,Math.round(f-1+e%c/c*Ta))}function Z(a,b){var c=m("selectHelper");va.build();if(c){var d=$(a,n.visStart)*oa+pa;if(0<=d&&d<ba){var d=va.rect(0,d,0,d,J),h=s(a,a),p=s(a,b);if(p>h){d.top=h;d.height=p-h;d.left+=2;d.width-=5;if(g.isFunction(c)){if(c=
c(a,b))d.position="absolute",d.zIndex=8,ca=g(c).css(d).appendTo(J)}else d.isStart=!0,d.isEnd=!0,ca=g(aa({title:"",start:a,end:b,className:["fc-select-helper"],editable:!1},d)),ca.css("opacity",m("dragOpacity"));ca&&(ca.click(e).mousedown(u),J.append(ca),za(ca,d.width,!0),cb(ca,d.height,!0))}}}else f(a,b)}function v(){w();ca&&(ca.remove(),ca=null)}function u(a){if(1==a.which&&m("selectable")){R(a);var b;xa.start(function(a,c){v();if(a&&a.col==c.col&&!l(a)){var e=h(c),d=h(a);b=[e,I(t(e),wa),d,I(t(d),
wa)].sort(eb);Z(b[0],b[3])}else b=null},a);g(document).one("mouseup",function(a){xa.stop();b&&(+b[0]==+b[1]&&L(b[0],!1,a),Q(b[0],b[3],!1,a))})}}function L(a,b,c){B("dayClick",P[k(a.getDay())],a,b,c)}var n=this;n.renderAgenda=function(b){ba=b;Y=m("theme")?"ui":"fc";ia=m("weekends")?0:1;ga=m("firstDay");(da=m("isRTL"))?(oa=-1,pa=ba-1):(oa=1,pa=0);ua=Ma(m("minTime"));W=Ma(m("maxTime"));na=m("columnFormat");ja=m("weekNumbers");ma=m("weekNumberTitle");qa="iso"!=m("weekNumberCalculation")?"w":"W";wa=m("snapMinutes")||
m("slotMinutes");if(E)C();else{b=Y+"-widget-header";var c=Y+"-widget-content",d,f,h,p,k,q=0==m("slotMinutes")%15;d="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr>";d=ja?d+("<th class='fc-agenda-axis fc-week-number "+b+"'/>"):d+("<th class='fc-agenda-axis "+b+"'>&nbsp;</th>");for(f=0;f<ba;f++)d+="<th class='fc- fc-col"+f+" "+b+"'/>";d+="<th class='fc-agenda-gutter "+b+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";
for(f=0;f<ba;f++)d+="<td class='fc- fc-col"+f+" "+c+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";E=g(d+("<td class='fc-agenda-gutter "+c+"'>&nbsp;</td></tr></tbody></table>")).appendTo(a);A=E.find("thead");S=A.find("th").slice(1,-1);G=E.find("tbody");P=G.find("td").slice(0,-1);F=P.find("div.fc-day-content div");O=P.eq(0);T=O.find("> div");Ba(A.add(A.find("tr")));Ba(G.add(G.find("tr")));ka=A.find("th:first");la=E.find(".fc-agenda-gutter");K=g("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);
m("allDaySlot")?(N=g("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(K),d="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+m("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b+" fc-agenda-gutter'>&nbsp;</th></tr></table>",z=g(d).appendTo(K),D=z.find("tr"),D.find("td").click(e).mousedown(ha),ka=ka.add(z.find("th:first")),la=la.add(z.find("th.fc-agenda-gutter")),K.append("<div class='fc-agenda-divider "+
b+"'><div class='fc-agenda-divider-inner'/></div>")):N=g([]);X=g("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(K);J=g("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(X);ta=g("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(J);d="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";h=Za();p=I(t(h),W);I(h,ua);for(f=Va=0;h<p;f++)k=h.getMinutes(),d+="<tr class='fc-slot"+f+" "+(k?"fc-minor":"")+
"'><th class='fc-agenda-axis "+b+"'>"+(q&&k?"&nbsp;":V(h,m("axisFormat")))+"</th><td class='"+c+"'><div style='position:relative'>&nbsp;</div></td></tr>",I(h,m("slotMinutes")),Va++;d+="</tbody></table>";fa=g(d).appendTo(J);ea=fa.find("div:first");fa.find("td").click(e).mousedown(u);ka=ka.add(fa.find("th:first"))}b=ra(new Date);ja&&(c=V(r(0),qa),c=da?c+ma:ma+c,A.find(".fc-week-number").text(c));for(c=0;c<ba;c++)h=r(c),d=S.eq(c),d.html(V(h,na)),f=P.eq(c),+h==+b?f.addClass(Y+"-state-highlight fc-today"):
f.removeClass(Y+"-state-highlight fc-today"),yb(d.add(f),h)};n.setWidth=function(a){hb=a;Ea.clear();sa=0;za(ka.width("").each(function(a,b){sa=Math.max(sa,g(b).outerWidth())}),sa);a=X[0].clientWidth;(Sa=X.width()-a)?(za(la,Sa),la.show().prev().removeClass("fc-last")):la.hide().prev().addClass("fc-last");Ca=Math.floor((a-sa)/ba);za(S.slice(0,-1),Ca)};n.setHeight=function(a,b){a===y&&(a=ib);ib=a;M={};var c=G.position().top,e=X.position().top,f=Math.min(a-c,fa.height()+e+1);T.height(f-ya(O));K.css("top",
c);X.height(f-e-1);Ta=ea.height()+1;Ua=m("slotMinutes")/wa;Da=Ta/Ua;b&&d()};n.beforeHide=function(){U=X.scrollTop()};n.afterShow=function(){X.scrollTop(U)};n.defaultEventEnd=function(a){var b=t(a.start);return a.allDay?b:I(b,m("defaultEventMinutes"))};n.timePosition=s;n.dayOfWeekCol=k;n.dateCell=function(a){return{row:Math.floor($(a,n.visStart)/7),col:k(a.getDay())}};n.cellDate=h;n.cellIsAllDay=l;n.allDayRow=function(a){return D};n.allDayBounds=function(){return{left:sa,right:hb-Sa}};n.getHoverListener=
function(){return xa};n.colContentLeft=function(a){return Ea.left(a)};n.colContentRight=function(a){return Ea.right(a)};n.getDaySegmentContainer=function(){return N};n.getSlotSegmentContainer=function(){return ta};n.getMinMinute=function(){return ua};n.getMaxMinute=function(){return W};n.getBodyContent=function(){return J};n.getRowCnt=function(){return 1};n.getColCnt=function(){return ba};n.getColWidth=function(){return Ca};n.getSnapHeight=function(){return Da};n.getSnapMinutes=function(){return wa};
n.defaultSelectionEnd=function(a,b){return b?t(a):I(t(a),m("slotMinutes"))};n.renderDayOverlay=q;n.renderSelection=function(a,b,c){c?m("allDaySlot")&&q(a,x(t(b),1),!0):Z(a,b)};n.clearSelection=v;n.reportDayClick=L;n.dragStart=function(a,b,c){xa.start(function(a){w();if(a)if(l(a))p(a.row,a.col,a.row,a.col);else{a=h(a);var b=I(t(a),m("defaultEventMinutes"));f(a,b)}},b)};n.dragStop=function(a,b,c){var d=xa.stop();w();d&&B("drop",a,h(d),l(d),b,c)};jb.call(n,a,c,b);kb.call(n);lb.call(n);Ab.call(n);var m=
n.opt,B=n.trigger,C=n.clearEvents,H=n.renderOverlay,w=n.clearOverlays,Q=n.reportSelection,R=n.unselect,ha=n.daySelectionMousedown,aa=n.slotSegHtml,V=c.formatDate,E,A,S,G,P,F,O,T,K,N,z,D,X,J,ta,fa,ea,ka,la,ca,hb,ib,sa,Ca,Sa,Ta,wa,Ua,Da,ba,Va,va,xa,Ea,M={},U,Y,ga,ia,da,oa,pa,ua,W,na,ja,ma,qa;Aa(a.addClass("fc-agenda"));va=new mb(function(a,b){var c,d,e;S.each(function(a,f){c=g(f);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();m("allDaySlot")&&(c=D,d=c.offset().top,a[0]=[d,d+c.outerHeight()]);
for(var f=J.offset().top,h=X.offset().top,p=h+X.outerHeight(),k=0;k<Va*Ua;k++)a.push([Math.max(h,Math.min(p,f+Da*k)),Math.max(h,Math.min(p,f+Da*(k+1)))])});xa=new nb(va);Ea=new ob(function(a){return F.eq(a)})}function Ab(){function a(a){a=Oa(Na(a,g.map(a,ja),f.visStart,f.visEnd));var b,c=a.length,d,e,h,m=[];for(b=0;b<c;b++)for(d=a[b],e=0;e<d.length;e++)h=d[e],h.row=0,h.level=b,m.push(h);return m}function c(a){return a.end?t(a.end):I(t(a.start),h("defaultEventMinutes"))}function b(a,b){var c="<",d=
a.url,e=gb(a,h),f=["fc-event","fc-event-vert"];l(a)&&f.push("fc-event-draggable");b.isStart&&f.push("fc-event-start");b.isEnd&&f.push("fc-event-end");f=f.concat(a.className);a.source&&(f=f.concat(a.source.className||[]));c=d?c+("a href='"+W(a.url)+"'"):c+"div";c+=" class='"+f.join(" ")+"' style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+e+"'><div class='fc-event-inner'><div class='fc-event-time'>"+W(J(a.start,a.end,h("timeFormat")))+"</div><div class='fc-event-title'>"+W(a.title)+
"</div></div><div class='fc-event-bg'></div>";b.isEnd&&k(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return c+("</"+(d?"a":"div")+">")}function d(a,b,c){var d=b.find("div.fc-event-time");l(a)&&q(a,b,d);c.isEnd&&k(a)&&p(a,b,d);u(a,b)}function e(a,b,c){function d(){g||(b.width(e).height("").draggable("option","grid",null),g=!0)}var e,f,g=!0,m,p=h("isRTL")?-1:1,k=B(),q=E(),l=A(),w=S(),n=H();b.draggable({zIndex:9,opacity:h("dragOpacity","month"),revertDuration:h("dragRevertDuration"),
start:function(n,F){r("eventDragStart",b,a,n,F);O(a,b);e=b.width();k.start(function(e,k,r,n){z();e?(f=!1,m=n*p,e.row?c?g&&(b.width(q-10),cb(b,l*Math.round((a.end?(a.end-a.start)/Bb:h("defaultEventMinutes"))/w)),b.draggable("option","grid",[q,1]),g=!1):f=!0:(N(x(t(a.start),m),x(ja(a),m)),d()),f=f||g&&!m):(d(),f=!0);b.draggable("option","revert",f)},n,"drag")},stop:function(c,e){k.stop();z();r("eventDragStop",b,a,c,e);if(f)d(),b.css("filter",""),F(a,b);else{var h=0;g||(h=Math.round((b.offset().top-
G().offset().top)/l)*w+n-(60*a.start.getHours()+a.start.getMinutes()));T(this,a,m,h,g,c,e)}}})}function q(a,b,c){function d(b){var e=I(t(a.start),b),f;a.end&&(f=I(t(a.end),b));c.text(J(e,f,h("timeFormat")))}function e(){g&&(c.css("display",""),b.draggable("option","grid",[n,s]),g=!1)}var f,g=!1,m,p,k,q=h("isRTL")?-1:1,l=B(),w=V(),n=E(),s=A(),C=S();b.draggable({zIndex:9,scroll:!1,grid:[n,s],axis:1==w?"y":!1,opacity:h("dragOpacity"),revertDuration:h("dragRevertDuration"),start:function(d,n){r("eventDragStart",
b,a,d,n);O(a,b);f=b.position();p=k=0;l.start(function(d,f,p,k){b.draggable("option","revert",!d);z();d&&(m=k*q,h("allDaySlot")&&!d.row?(g||(g=!0,c.hide(),b.draggable("option","grid",null)),N(x(t(a.start),m),x(ja(a),m))):e())},d,"drag")},drag:function(a,b){p=Math.round((b.position.top-f.top)/s)*C;p!=k&&(g||d(p),k=p)},stop:function(c,h){var k=l.stop();z();r("eventDragStop",b,a,c,h);k&&(m||p||g)?T(this,a,m,g?0:p,g,c,h):(e(),b.css("filter",""),b.css(f),d(0),F(a,b))}})}function p(a,b,c){var d,e,f=A(),
g=S();b.resizable({handles:{s:".ui-resizable-handle"},grid:f,start:function(c,f){d=e=0;O(a,b);b.css("z-index",9);r("eventResizeStart",this,a,c,f)},resize:function(m,p){d=Math.round((Math.max(f,b.height())-p.originalSize.height)/f);d!=e&&(c.text(J(a.start,d||a.end?I(s(a),g*d):null,h("timeFormat"))),e=d)},stop:function(c,e){r("eventResizeStop",this,a,c,e);d?K(this,a,0,g*d,c,e):(b.css("z-index",8),F(a,b))}})}var f=this;f.renderEvents=function(e,p){Z(e);var k,q=e.length,l=[],n=[];for(k=0;k<q;k++)e[k].allDay?
l.push(e[k]):n.push(e[k]);h("allDaySlot")&&(M(a(l),p),L());var q=V(),l=H(),F=C(),B=I(t(f.visStart),l),s=g.map(n,c),N,z,u,D,v,O;k=[];for(N=0;N<q;N++){u=z=Oa(Na(n,s,B,I(t(B),F-l)));var T=O=v=D=void 0,K=void 0,J=void 0;for(D=u.length-1;0<D;D--)for(T=u[D],v=0;v<T.length;v++)for(K=T[v],O=0;O<u[D-1].length;O++)J=u[D-1][O],K.end>J.start&&K.start<J.end&&(J.forward=Math.max(J.forward||0,(K.forward||0)+1));for(u=0;u<z.length;u++)for(D=z[u],v=0;v<D.length;v++)O=D[v],O.col=N,O.level=u,k.push(O);x(B,1,!0)}var n=
k.length,A,E,G;z="";F={};B={};N=m();q=V();(u=h("isRTL"))?(D=-1,T=q-1):(D=1,T=0);for(q=0;q<n;q++)l=k[q],s=l.event,v=w(l.start,l.start),O=w(l.start,l.end),A=l.col,K=l.level,J=l.forward||0,E=Q(A*D+T),G=R(A*D+T)-E,G=Math.min(G-6,0.95*G),A=K?G/(K+J+1):J?2*(G/(J+1)-6):G,K=E+G/(K+J+1)*K*D+(u?G-A:0),l.top=v,l.left=K,l.outerWidth=A,l.outerHeight=O-v,z+=b(s,l);N[0].innerHTML=z;u=N.children();for(q=0;q<n;q++)l=k[q],s=l.event,z=g(u[q]),D=r("eventRender",s,s,z),!1===D?z.remove():(D&&!0!==D&&(z.remove(),z=g(D).css({position:"absolute",
top:l.top,left:l.left}).appendTo(N)),l.element=z,s._id===p?d(s,z,l):z[0]._fci=q,P(s,z));bb(N,k,d);for(q=0;q<n;q++)if(l=k[q],z=l.element)N=F[s=l.key=fb(z[0])],l.vsides=N===y?F[s]=ya(z,!0):N,N=B[s],l.hsides=N===y?B[s]=Pa(z,!0):N,s=z.find(".fc-event-title"),s.length&&(l.contentTop=s[0].offsetTop);for(q=0;q<n;q++)if(l=k[q],z=l.element)z[0].style.width=Math.max(0,l.outerWidth-l.hsides)+"px",F=Math.max(0,l.outerHeight-l.vsides),z[0].style.height=F+"px",s=l.event,l.contentTop!==y&&10>F-l.contentTop&&(z.find("div.fc-event-time").text(X(s.start,
h("timeFormat"))+" - "+s.title),z.find("div.fc-event-title").remove()),r("eventAfterRender",s,s,z);r("eventAfterAllRender")};f.compileDaySegs=a;f.clearEvents=function(){v();n().empty();m().empty()};f.slotSegHtml=b;f.bindDaySeg=function(a,b,c){l(a)&&e(a,b,c.isStart);c.isEnd&&k(a)&&aa(a,b,c);u(a,b)};pb.call(f);var h=f.opt,r=f.trigger,l=f.isEventDraggable,k=f.isEventResizable,s=f.eventEnd,Z=f.reportEvents,v=f.reportEventClear,u=f.eventElementHandlers,L=f.setHeight,n=f.getDaySegmentContainer,m=f.getSlotSegmentContainer,
B=f.getHoverListener,C=f.getMaxMinute,H=f.getMinMinute,w=f.timePosition,Q=f.colContentLeft,R=f.colContentRight,M=f.renderDaySegs,aa=f.resizableDayEvent,V=f.getColCnt,E=f.getColWidth,A=f.getSnapHeight,S=f.getSnapMinutes,G=f.getBodyContent,P=f.reportEventElement,F=f.showEvents,O=f.hideEvents,T=f.eventDrop,K=f.eventResize,N=f.renderDayOverlay,z=f.clearOverlays,D=f.calendar,X=D.formatDate,J=D.formatDates}function jb(a,c,b){function d(a,c){var d=n[a];return"object"==typeof d?Ia(d,c||b):d}function e(a,
b){return c.trigger.apply(c,[a,b||l].concat(Array.prototype.slice.call(arguments,2),[l]))}function g(a){return na(a.editable,(a.source||{}).editable,d("editable"))}function p(a){return a.end?t(a.end):k(a)}function f(a,b,c){a=L[a._id];var d,e=a.length;for(d=0;d<e;d++)if(!b||a[d][0]!=b[0])a[d][c]()}function h(a,b,c,d){c=c||0;for(var e,f=a.length,g=0;g<f;g++)e=a[g],d!==y&&(e.allDay=d),I(x(e.start,b,!0),c),e.end&&(e.end=I(x(e.end,b,!0),c)),s(e,n)}function r(a,b,c){c=c||0;for(var d,e=a.length,f=0;f<e;f++)d=
a[f],d.end=I(x(p(d),b,!0),c),s(d,n)}var l=this;l.element=a;l.calendar=c;l.name=b;l.opt=d;l.trigger=e;l.isEventDraggable=function(a){return g(a)&&!d("disableDragging")};l.isEventResizable=function(a){return g(a)&&!d("disableResizing")};l.reportEvents=function(a){v={};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],v[d._id]?v[d._id].push(d):v[d._id]=[d]};l.eventEnd=p;l.reportEventElement=function(a,b){u.push(b);L[a._id]?L[a._id].push(b):L[a._id]=[b]};l.reportEventClear=function(){u=[];L={}};l.eventElementHandlers=
function(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return e("eventClick",this,a,c)}).hover(function(b){e("eventMouseover",this,a,b)},function(b){e("eventMouseout",this,a,b)})};l.showEvents=function(a,b){f(a,b,"show")};l.hideEvents=function(a,b){f(a,b,"hide")};l.eventDrop=function(a,b,c,d,f,g,k){var p=b.allDay,l=b._id;h(v[l],c,d,f);e("eventDrop",a,b,c,d,f,function(){h(v[l],-c,-d,p);Z(l)},g,k);Z(l)};l.eventResize=function(a,b,c,d,f,g){var h=
b._id;r(v[h],c,d);e("eventResize",a,b,c,d,function(){r(v[h],-c,-d);Z(h)},f,g);Z(h)};var k=l.defaultEventEnd,s=c.normalizeEvent,Z=c.reportEventChange,v={},u=[],L={},n=c.options}function pb(){function a(a){var b=r("isRTL"),c,d=a.length,e,f,g,h;c=H();var l=c.left,p=c.right,q,m,n,t,u,v="";for(c=0;c<d;c++)e=a[c],f=e.event,h=["fc-event","fc-event-hori"],k(f)&&h.push("fc-event-draggable"),e.isStart&&h.push("fc-event-start"),e.isEnd&&h.push("fc-event-end"),b?(q=I(e.end.getDay()-1),m=I(e.start.getDay()),n=
e.isEnd?w(q):l,t=e.isStart?M(m):p):(q=I(e.start.getDay()),m=I(e.end.getDay()-1),n=e.isStart?w(q):l,t=e.isEnd?M(m):p),h=h.concat(f.className),f.source&&(h=h.concat(f.source.className||[])),g=f.url,u=gb(f,r),v=g?v+("<a href='"+W(g)+"'"):v+"<div",v+=" class='"+h.join(" ")+"' style='position:absolute;z-index:8;left:"+n+"px;"+u+"'><div class='fc-event-inner'>",!f.allDay&&e.isStart&&(v+="<span class='fc-event-time'>"+W(A(f.start,f.end,r("timeFormat")))+"</span>"),v+="<span class='fc-event-title'>"+W(f.title)+
"</span></div>",e.isEnd&&s(f)&&(v+="<div class='ui-resizable-handle ui-resizable-"+(b?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),v+="</"+(g?"a":"div")+">",e.left=n,e.outerWidth=t-n,e.startCol=q,e.endCol=m+1;return v}function c(a,b){var c,d=a.length,e,f,h;for(c=0;c<d;c++)e=a[c],f=e.event,h=g(b[c]),f=l("eventRender",f,f,h),!1===f?h.remove():(f&&!0!==f&&(f=g(f).css({position:"absolute",left:e.left}),h.replaceWith(f),h=f),e.element=h)}function b(a){var b,c=a.length,d,e,f,g,h={};for(b=0;b<c;b++)if(d=a[b],
e=d.element)f=d.key=fb(e[0]),g=h[f],g===y&&(g=h[f]=Pa(e,!0)),d.hsides=g}function d(a){var b,c=a.length,d,e;for(b=0;b<c;b++)if(d=a[b],e=d.element)e[0].style.width=Math.max(0,d.outerWidth-d.hsides)+"px"}function e(a){var b,c=a.length,d,e,f,g,h={};for(b=0;b<c;b++)if(d=a[b],e=d.element)f=d.key,g=h[f],g===y&&(g=h[f]=db(e)),d.outerHeight=e[0].offsetHeight+g}function q(){var a,b=m(),c=[];for(a=0;a<b;a++)c[a]=C(a).find("div.fc-day-content > div");return c}function p(a){var b,c=a.length,d=[];for(b=0;b<c;b++)d[b]=
a[b][0].offsetTop;return d}function f(a,b){var c,d=a.length,e,f;for(c=0;c<d;c++)if(e=a[c],f=e.element)f[0].style.top=b[e.row]+(e.top||0)+"px",e=e.event,l("eventAfterRender",e,e,f)}var h=this;h.renderDaySegs=function(g,h){var l=V(),k=m(),n=B(),s=0,r,t,u,w=g.length,x,y;l[0].innerHTML=a(g);c(g,l.children());t=g.length;for(r=0;r<t;r++)u=g[r],(y=u.element)&&v(u.event,y);t=g.length;var A;for(r=0;r<t;r++)if(u=g[r],y=u.element)A=u.event,A._id===h?E(A,y,u):y[0]._fci=r;bb(l,g,E);b(g);d(g);e(g);l=q();for(r=
0;r<k;r++){t=[];for(u=0;u<n;u++)t[u]=0;for(;s<w&&(x=g[s]).row==r;){u=t.slice(x.startCol,x.endCol);u=Math.max.apply(Math,u);x.top=u;u+=x.outerHeight;for(y=x.startCol;y<x.endCol;y++)t[y]=u;s++}l[r].height(Math.max.apply(Math,t))}f(g,p(l))};h.resizableDayEvent=function(k,s,v){var w=r("isRTL"),y=w?"w":"e",z=s.find(".ui-resizable-"+y),A=!1;Aa(s);s.mousedown(function(a){a.preventDefault()}).click(function(a){A&&(a.preventDefault(),a.stopImmediatePropagation())});z.mousedown(function(r){function z(a){l("eventResizeStop",
this,k,a);g("body").css("cursor","");C.stop();G();R&&n(this,k,R,0,a);setTimeout(function(){A=!1},0)}if(1==r.which){A=!0;var C=h.getHoverListener(),E=m(),H=B(),I=w?-1:1,M=w?H-1:0,Q=s.css("top"),R,U,$=g.extend({},k),W=Y(k.start);P();g("body").css("cursor",y+"-resize").one("mouseup",z);l("eventResizeStart",this,k,r);C.start(function(h,l){if(h){var m=Math.max(W.row,h.row),r=h.col;1==E&&(m=0);m==W.row&&(r=w?Math.min(W.col,r):Math.max(W.col,r));R=7*m+r*I+M-(7*l.row+l.col*I+M);m=x(Z(k),R,!0);if(R){$.end=
m;var r=U,n=aa([$]),s=v.row,z=g("<div/>"),A=V(),B=n.length,C;z[0].innerHTML=a(n);z=z.children();A.append(z);c(n,z);b(n);d(n);e(n);f(n,p(q()));z=[];for(A=0;A<B;A++)if(C=n[A].element)n[A].row===s&&C.css("top",Q),z.push(C[0]);U=g(z);U.find("*").css("cursor",y+"-resize");r&&r.remove();L(k)}else U&&(u(k),U.remove(),U=null);G();S(k.start,x(t(m),1))}},r)}})};var r=h.opt,l=h.trigger,k=h.isEventDraggable,s=h.isEventResizable,Z=h.eventEnd,v=h.reportEventElement,u=h.showEvents,L=h.hideEvents,n=h.eventResize,
m=h.getRowCnt,B=h.getColCnt,C=h.allDayRow,H=h.allDayBounds,w=h.colContentLeft,M=h.colContentRight,I=h.dayOfWeekCol,Y=h.dateCell,aa=h.compileDaySegs,V=h.getDaySegmentContainer,E=h.bindDaySeg,A=h.calendar.formatDates,S=h.renderDayOverlay,G=h.clearOverlays,P=h.clearSelection}function lb(){function a(a){h&&(h=!1,f(),e("unselect",null,a))}function c(a,b,c,d){h=!0;e("select",null,a,b,c,d)}var b=this;b.select=function(b,d,e){a();d||(d=q(b,e));p(b,d,e);c(b,d,e)};b.unselect=a;b.reportSelection=c;b.daySelectionMousedown=
function(e){var h=b.cellDate,k=b.cellIsAllDay,q=b.getHoverListener(),t=b.reportDayClick;if(1==e.which&&d("selectable")){a(e);var v;q.start(function(a,b){f();a&&k(a)?(v=[h(b),h(a)].sort(eb),p(v[0],v[1],!0)):v=null},e);g(document).one("mouseup",function(a){q.stop();v&&(+v[0]==+v[1]&&t(v[0],!0,a),c(v[0],v[1],!0,a))})}};var d=b.opt,e=b.trigger,q=b.defaultSelectionEnd,p=b.renderSelection,f=b.clearSelection,h=!1;d("selectable")&&d("unselectAuto")&&g(document).mousedown(function(b){var c=d("unselectCancel");
c&&g(b.target).parents(c).length||a(b)})}function kb(){this.renderOverlay=function(b,d){var e=c.shift();e||(e=g("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));e[0].parentNode!=d[0]&&e.appendTo(d);a.push(e.css(b).show());return e};this.clearOverlays=function(){for(var b;b=a.shift();)c.push(b.hide().unbind())};var a=[],c=[]}function mb(a){var c,b;this.build=function(){c=[];b=[];a(c,b)};this.cell=function(a,e){var g=c.length,p=b.length,f,h=-1,r=-1;for(f=0;f<g;f++)if(e>=c[f][0]&&
e<c[f][1]){h=f;break}for(f=0;f<p;f++)if(a>=b[f][0]&&a<b[f][1]){r=f;break}return 0<=h&&0<=r?{row:h,col:r}:null};this.rect=function(a,e,g,p,f){f=f.offset();return{top:c[a][0]-f.top,left:b[e][0]-f.left,width:b[p][1]-b[e][0],height:c[g][1]-c[a][0]}}}function nb(a){function c(b){b.pageX===y&&(b.pageX=b.originalEvent.pageX,b.pageY=b.originalEvent.pageY);b=a.cell(b.pageX,b.pageY);if(!b!=!q||b&&(b.row!=q.row||b.col!=q.col))b?(e||(e=b),d(b,e,b.row-e.row,b.col-e.col)):d(b,e),q=b}var b,d,e,q;this.start=function(p,
f,h){d=p;e=q=null;a.build();c(f);b=h||"mousemove";g(document).bind(b,c)};this.stop=function(){g(document).unbind(b,c);return q}}function ob(a){var c=this,b={},d={},e={};c.left=function(c){return d[c]=d[c]===y?(b[c]=b[c]||a(c)).position().left:d[c]};c.right=function(d){return e[d]=e[d]===y?c.left(d)+(b[d]=b[d]||a(d)).width():e[d]};c.clear=function(){b={};d={};e={}}}var ma={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",
weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},Cb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",
next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},M=g.fullCalendar={version:"1.6.1"},Y=M.views={};g.fn.fullCalendar=function(a){if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1),b;this.each(function(){var d=g.data(this,"fullCalendar");d&&g.isFunction(d[a])&&(d=d[a].apply(d,c),b===y&&(b=d),"destroy"==a&&g.removeData(this,
"fullCalendar"))});return b!==y?b:this}var d=a.eventSources||[];delete a.eventSources;a.events&&(d.push(a.events),delete a.events);a=g.extend(!0,{},ma,a.isRTL||a.isRTL===y&&ma.isRTL?Cb:{},a);this.each(function(b,c){var p=g(c),f=new rb(p,a,d);p.data("fullCalendar",f);f.render()});return this};M.sourceNormalizers=[];M.sourceFetchers=[];var ub={dataType:"json",cache:!1},vb=1;M.addDays=x;M.cloneDate=t;M.parseDate=Ja;M.parseISO8601=La;M.parseTime=Ma;M.formatDate=ia;M.formatDates=Ha;var Qa="sun mon tue wed thu fri sat".split(" "),
$a=864E5,wb=36E5,Bb=6E4,ab={s:function(a){return a.getSeconds()},ss:function(a){return da(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return da(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return da(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return da(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return da(a.getDate())},ddd:function(a,c){return c.dayNamesShort[a.getDay()]},dddd:function(a,c){return c.dayNames[a.getDay()]},
M:function(a){return a.getMonth()+1},MM:function(a){return da(a.getMonth()+1)},MMM:function(a,c){return c.monthNamesShort[a.getMonth()]},MMMM:function(a,c){return c.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return ia(a,
"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"},w:function(a,c){return c.weekNumberCalculation(a)},W:function(a){var c=new Date(a.getTime());c.setDate(c.getDate()+4-(c.getDay()||7));a=c.getTime();c.setMonth(0);c.setDate(1);return Math.floor(Math.round((a-c)/864E5)/7)+1}};M.dateFormatters=ab;M.applyAll=qa;Y.month=function(a,c){var b=this;b.render=function(a,c){c&&(Ga(a,c),a.setDate(1));var h=t(a,!0);h.setDate(1);var r=Ga(t(h),1),l=t(h),
k=t(r),s=d("firstDay"),y=d("weekends")?0:1;y&&(U(l),U(k,-1,!0));x(l,-((l.getDay()-Math.max(s,y)+7)%7));x(k,(7-k.getDay()+Math.max(s,y))%7);s=Math.round((k-l)/(7*$a));"fixed"==d("weekMode")&&(x(k,7*(6-s)),s=6);b.title=g(h,d("titleFormat"));b.start=h;b.end=r;b.visStart=l;b.visEnd=k;e(s,y?5:7,!0)};Ra.call(b,a,c,"month");var d=b.opt,e=b.renderBasic,g=c.formatDate};Y.basicWeek=function(a,c){var b=this;b.render=function(a,c){c&&x(a,7*c);var h=x(t(a),-((a.getDay()-d("firstDay")+7)%7)),r=x(t(h),7),l=t(h),
k=t(r),s=d("weekends");s||(U(l),U(k,-1,!0));b.title=g(l,x(t(k),-1),d("titleFormat"));b.start=h;b.end=r;b.visStart=l;b.visEnd=k;e(1,s?7:5,!1)};Ra.call(b,a,c,"basicWeek");var d=b.opt,e=b.renderBasic,g=c.formatDates};Y.basicDay=function(a,c){var b=this;b.render=function(a,c){c&&(x(a,c),d("weekends")||U(a,0>c?-1:1));b.title=g(a,d("titleFormat"));b.start=b.visStart=t(a,!0);b.end=b.visEnd=x(t(b.start),1);e(1,1,!1)};Ra.call(b,a,c,"basicDay");var d=b.opt,e=b.renderBasic,g=c.formatDate};Wa({weekMode:"fixed"});
Y.agendaWeek=function(a,c){var b=this;b.render=function(a,c){c&&x(a,7*c);var h=x(t(a),-((a.getDay()-d("firstDay")+7)%7)),r=x(t(h),7),l=t(h),k=t(r),s=d("weekends");s||(U(l),U(k,-1,!0));b.title=g(l,x(t(k),-1),d("titleFormat"));b.start=h;b.end=r;b.visStart=l;b.visEnd=k;e(s?7:5)};qb.call(b,a,c,"agendaWeek");var d=b.opt,e=b.renderAgenda,g=c.formatDates};Y.agendaDay=function(a,c){var b=this;b.render=function(a,c){c&&(x(a,c),d("weekends")||U(a,0>c?-1:1));var h=t(a,!0),r=x(t(h),1);b.title=g(a,d("titleFormat"));
b.start=b.visStart=h;b.end=b.visEnd=r;e(1)};qb.call(b,a,c,"agendaDay");var d=b.opt,e=b.renderAgenda,g=c.formatDate};Wa({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24})})(jQuery);
